import{r as a,u as g,j as e,L as b,m as h,s as f,a as v}from"./index-DlxGab-w.js";import{a as S,S as w}from"./Skeleton-CeN7a-3a.js";import{S as N}from"./StatusBadge-CWIYn1ry.js";function D(){const[r,x]=a.useState([]),[p,m]=a.useState(!0),[o,j]=a.useState(null),[s,l]=a.useState(""),y=g(),i=a.useCallback(()=>{S("/jobs?limit=50").then(x).catch(t=>j(t.message)).finally(()=>m(!1))},[]);a.useEffect(()=>{i();const t=setInterval(i,1e4);return()=>clearInterval(t)},[i]);const c=s?r.filter(t=>t.status.toLowerCase()===s.toLowerCase()):r,u=r.reduce((t,n)=>{const d=n.status.toLowerCase();return t[d]=(t[d]||0)+1,t},{});return e.jsxs("div",{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Jobs"}),e.jsx("p",{children:"Monitor and manage your processing jobs"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[e.jsxs("button",{className:s===""?"btn-primary":"btn-secondary",style:{padding:"6px 14px",fontSize:"13px"},onClick:()=>l(""),children:["All (",r.length,")"]}),Object.entries(u).map(([t,n])=>e.jsxs("button",{className:s===t?"btn-primary":"btn-secondary",style:{padding:"6px 14px",fontSize:"13px"},onClick:()=>l(s===t?"":t),children:[t.charAt(0).toUpperCase()+t.slice(1)," (",n,")"]},t))]}),o&&e.jsx("div",{className:"error-message",children:o}),p?e.jsx("div",{className:"card",style:{padding:0},children:e.jsx(w,{rows:5,cols:5})}):c.length===0?e.jsx("div",{className:"card",style:{padding:0},children:e.jsxs("div",{className:"empty-state",children:[e.jsxs("svg",{className:"empty-state-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeDasharray:"3 3",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.jsx("path",{d:"M3 9h18",strokeDasharray:"none"}),e.jsx("path",{d:"M9 21V9",strokeDasharray:"none"})]}),e.jsx("div",{className:"empty-state-title",children:s?`No ${s} jobs`:"No jobs yet"}),e.jsx("div",{className:"empty-state-description",children:s?"Try a different filter or check back later":"Submit your first data processing job to get started"}),!s&&e.jsx(b,{to:"/submit",className:"btn-primary",style:{textDecoration:"none"},children:"Submit a Job"})]})}):e.jsx(h.div,{className:"card",style:{padding:0},variants:f,initial:"initial",animate:"animate",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Job ID"}),e.jsx("th",{children:"Pipeline"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Submitted"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs(h.tr,{className:`row-${t.status.toLowerCase()}`,variants:v,onClick:()=>y(`/jobs/${t.job_id}`),style:{cursor:"pointer"},children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"12px",whiteSpace:"nowrap"},children:t.job_id}),e.jsx("td",{children:t.plugin_name}),e.jsx("td",{children:e.jsx(N,{status:t.status})}),e.jsx("td",{style:{color:"var(--text-dim)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.description||"â€”"}),e.jsx("td",{style:{color:"var(--text-dim)"},children:new Date(t.created_at).toLocaleString()})]},t.job_id))})]})})}),e.jsx("div",{style:{marginTop:"16px",fontSize:"12px",color:"var(--text-dim)"},children:"Auto-refreshes every 10 seconds"})]})}export{D as Jobs};
