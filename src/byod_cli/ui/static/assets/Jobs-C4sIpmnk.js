import{r,u as f,j as e,m as x,s as v,a as y}from"./index-eBHcrhee.js";import{a as b}from"./useApi-DI9ecT4O.js";import{S}from"./StatusBadge-CD4kIfB2.js";function L(){const[i,p]=r.useState([]),[h,m]=r.useState(!0),[l,j]=r.useState(null),[s,o]=r.useState(""),g=f(),a=r.useCallback(()=>{b("/jobs?limit=50").then(p).catch(t=>j(t.message)).finally(()=>m(!1))},[]);r.useEffect(()=>{a();const t=setInterval(a,1e4);return()=>clearInterval(t)},[a]);const d=s?i.filter(t=>t.status.toLowerCase()===s.toLowerCase()):i,u=i.reduce((t,n)=>{const c=n.status.toLowerCase();return t[c]=(t[c]||0)+1,t},{});return e.jsxs("div",{children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Jobs"}),e.jsx("p",{children:"Monitor and manage your processing jobs"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[e.jsxs("button",{className:s===""?"btn-primary":"btn-secondary",style:{padding:"6px 14px",fontSize:"13px"},onClick:()=>o(""),children:["All (",i.length,")"]}),Object.entries(u).map(([t,n])=>e.jsxs("button",{className:s===t?"btn-primary":"btn-secondary",style:{padding:"6px 14px",fontSize:"13px"},onClick:()=>o(s===t?"":t),children:[t.charAt(0).toUpperCase()+t.slice(1)," (",n,")"]},t))]}),l&&e.jsx("div",{className:"error-message",children:l}),h?e.jsx("div",{className:"loading",children:"Loading jobs..."}):d.length===0?e.jsx("div",{className:"card",style:{textAlign:"center",padding:"48px"},children:e.jsx("p",{style:{color:"var(--text-dim)"},children:s?`No ${s} jobs found`:"No jobs yet"})}):e.jsx(x.div,{className:"card",style:{padding:0},variants:v,initial:"initial",animate:"animate",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Job ID"}),e.jsx("th",{children:"Pipeline"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Submitted"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs(x.tr,{variants:y,onClick:()=>g(`/jobs/${t.job_id}`),style:{cursor:"pointer"},children:[e.jsx("td",{style:{fontFamily:"monospace",fontSize:"12px",whiteSpace:"nowrap"},children:t.job_id}),e.jsx("td",{children:t.plugin_name}),e.jsx("td",{children:e.jsx(S,{status:t.status})}),e.jsx("td",{style:{color:"var(--text-dim)",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.description||"â€”"}),e.jsx("td",{style:{color:"var(--text-dim)"},children:new Date(t.created_at).toLocaleString()})]},t.job_id))})]})})}),e.jsx("div",{style:{marginTop:"16px",fontSize:"12px",color:"var(--text-dim)"},children:"Auto-refreshes every 10 seconds"})]})}export{L as Jobs};
